<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>CSA Hello SSL Certificate Installer</title>
        <style>
            body {
                font-family: Arial, sans-serif;
                line-height: 1.6;
                max-width: 800px;
                margin: 0 auto;
                padding: 20px;
                color: #333;
            }
            h1 {
                color: #0066cc;
                border-bottom: 1px solid #eee;
                padding-bottom: 10px;
            }
            .container {
                background-color: #f9f9f9;
                border: 1px solid #ddd;
                border-radius: 5px;
                padding: 20px;
                margin: 20px 0;
            }
            .button {
                background-color: #0066cc;
                color: white;
                border: none;
                padding: 10px 20px;
                font-size: 16px;
                border-radius: 4px;
                cursor: pointer;
            }
            .button:hover {
                background-color: #0055aa;
            }
            .success {
                color: green;
                font-weight: bold;
            }
            .error {
                color: red;
                font-weight: bold;
            }
            .hidden {
                display: none;
            }
            ol {
                margin-left: 20px;
            }
            li {
                margin-bottom: 10px;
            }
            .note {
                background-color: #ffffd9;
                border-left: 4px solid #ffcc00;
                padding: 10px;
                margin: 10px 0;
            }
        </style>
    </head>
    <body>
        <h1>CSA Hello SSL Certificate Installer</h1>

        <div class="container">
            <h2>Why do you need this certificate?</h2>
            <p>
                To use camera and microphone features in our meeting
                application, your browser needs to trust our secure connection.
                Installing this certificate will:
            </p>
            <ul>
                <li>
                    Allow access to your camera and microphone for video calls
                </li>
                <li>Remove security warnings when accessing our site</li>
                <li>
                    Enable all features of the CSA Hello platform to work
                    correctly
                </li>
            </ul>

            <div class="note">
                <p>
                    <strong>Note:</strong> This certificate is only for the CSA
                    Hello platform. It will not affect your security for other
                    websites.
                </p>
            </div>
        </div>

        <div class="container">
            <h2>Install the Certificate</h2>

            <p>
                Click the button below to download and install the certificate:
            </p>
            <button id="installCert" class="button">
                Install CSA Certificate
            </button>

            <div id="result" class="hidden"></div>

            <h3>Installation Steps:</h3>
            <ol>
                <li>Click the "Install CSA Certificate" button above</li>
                <li>When prompted to open or save the file, choose "Open"</li>
                <li>In the Certificate dialog, click "Install Certificate"</li>
                <li>
                    Choose "Local Machine" as the store location (may require
                    admin permissions)
                </li>
                <li>
                    Select "Place all certificates in the following store" and
                    click "Browse"
                </li>
                <li>
                    Select "Trusted Root Certification Authorities" and click
                    "OK"
                </li>
                <li>Click "Next" and then "Finish"</li>
                <li>
                    When prompted with a security warning, click "Yes" to
                    install the certificate
                </li>
                <li>
                    You should see a message confirming the import was
                    successful
                </li>
                <li>
                    Restart your browser and return to the CSA Hello application
                </li>
            </ol>
        </div>

        <div class="container">
            <h2>Manual Download Option</h2>
            <p>
                If the automatic installation doesn't work, you can manually
                download and install the certificate:
            </p>
            <a href="/cert-download" class="button" download="CSAHello.crt"
                >Download Certificate</a
            >

            <h3>Manual Installation Instructions:</h3>
            <ol>
                <li>Download the certificate by clicking the button above</li>
                <li>Double-click the downloaded file</li>
                <li>Follow steps 3-9 from the instructions above</li>
            </ol>
        </div>

        <script>
            document
                .getElementById("installCert")
                .addEventListener("click", function () {
                    // Redirect to the certificate download endpoint with special headers
                    window.location.href = "/cert-download?install=true";

                    // Show success message
                    const resultDiv = document.getElementById("result");
                    resultDiv.innerHTML =
                        '<p class="success">Certificate installation started. Please follow the prompts from your browser.</p>';
                    resultDiv.classList.remove("hidden");
                });
        </script>
    </body>
</html>
